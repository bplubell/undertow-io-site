<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="" name="description"> <meta content="Flavia Rainone" name="author"> <title>Undertow 2.1.0.Final Released Â· JBoss Community</title> <link href="https://static.jboss.org/theme/css/bootstrap-community/2.3.1.1/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link href="https://undertow.io/stylesheets/code.css" rel="stylesheet" type="text/css"> <script src="https://undertow.io/javascripts/highlight.pack.js" type="text/javascript"></script> <script type="text/javascript">hljs.initHighlightingOnLoad();</script> <!--[if lt IE 9]><script src="https://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--> <link href="https://undertow.io/images/undertow_icon_16px.png" rel="shortcut icon"> <link href="https://static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="https://static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="https://static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="https://static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <style>
  @media (min-width: 651px) {
      .banner { background-image: url(https://undertow.io/images/undertow_banner.png); height: 110px;  }
  }
  @media (max-width: 650px) {
      .banner { width: 200px; margin: 0px auto; }
  }
</style> <script src="https://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> </head> <body> <div class="container" id="content"> <div class="dropup"> <a class="tabnav-closed" href="https://www.redhat.com" id="tab">Red Hat</a> </div> <div class="banner"> </div> <div class="navbar navbar-inverse" id="navbar-fix"> <div class="navbar-inner"> <div class="container"> <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a> <div class="nav-collapse collapse"> <ul class="nav"> <li class=""><a href="https://undertow.io/index.html">Home</a></li> <li class="active"><a href="https://undertow.io/blog/index.html">Blog</a></li> <li class=""><a href="https://undertow.io/downloads.html">Download</a></li> <li class=""><a href="https://undertow.io/documentation.html">Documentation</a></li> <li class=""><a href="https://undertow.io/get-involved.html">Get Involved</a></li> <li class="divider"></li> </ul> </div> </div> </div> </div> <h2 class="title">Undertow 2.1.0.Final Released</h2> <div class="paragraph"> <p>A couple of weeks ago we released Undertow 2.1.0.Final, and now it is part of the new <a href="https://wildfly.org/news/2020/05/04/WildFly-1910-Released/">WildFly 19.1.0.Final</a>!</p> </div> <div class="paragraph"> <p>Undertow 2.1.0.Final comes with a new predicate handler: <a href="http://undertow.io/javadoc/2.1.x/io/undertow/server/handlers/SameSiteCookieHandler.html">samesite-cookie</a>.</p> </div> <div class="paragraph"> <p>This handler can be used to automatically add the <code>SameSite</code> attribute to cookies in your application, making it compatible with the latest draft for <a href="https://tools.ietf.org/html/draft-west-cookie-incrementalism-01">Incrementally Better Cookies</a> spec.</p> </div> <div class="paragraph"> <p>Several clients support the new spec, and that means that your cookies without a <code>SameSite</code> attribute will be treated like a <code>SameSite=Lax</code> cookie, limiting your cookie to be sent to same-site requests and top-level cross-site navigations as specificed <a href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-5.3.7.1">here</a>. Whether this is the desired behavior for your cookie or if you want it to have one of the other two values for <code>SameSite</code> (<code>None</code> or <code>Strict</code>), it is a good practice to explicitly define the <code>SameSite</code> attribute in your cookies. This can be achieved via <code>samesite-cookie</code> handler:</p> </div> <div class="paragraph"> <p>The handler can be used in the same way any other predicate handler, in the form <code>predicate&#8594;handler</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre>path(/app2)-&gt;samesite-cookie(`None`)</pre> </div> </div> <div class="paragraph"> <p>The predicate above will apply <code>SameSite=None</code> attribute to all cookies set when handling requests to the path <code>/app2</code>. As <code>None</code> is not <a href="https://www.chromium.org/updates/same-site/incompatible-clients">supported by all clients</a> the handler applies a client checker that skips the attribute if the client is not compatible.</p> </div> <div class="paragraph"> <p>This client check is enabled by default, but can be explicitly enabled or disabled via <code>enable-client-checker</code> parameter:</p> </div> <div class="listingblock"> <div class="content"> <pre>path(/app2)-&gt;samesite-cookie(mode=None, enable-client-checker=false)</pre> </div> </div> <div class="paragraph"> <p><a href="https://tools.ietf.org/html/draft-west-cookie-incrementalism-01#section-3.2">Session 3.2 of Incrementally Better Cookies</a> also makes it mandatory for cookies that have <code>SameSite=None</code> to have the <code>Secure</code> attribute. This is done automatically by the handler unless <code>add-secure-for-none=false</code> parameter is specified.</p> </div> <div class="paragraph"> <p>Finally, the handler can be used in a finer grained way if desired, via the optional <code>cookie-pattern</code> parameter, that expects a cookie name regex. The example below adds <code>SameSite=Lax</code> to all cookies whose name start with <code>abc</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre>path(/app2)-&gt;samesite-cookie(mode=Lax, cookie-pattern=abc*)</pre> </div> </div> <div class="paragraph"> <p>Besides the new handler, we have added several fixes to the project and updated dependencies to the latest.</p> </div> <div class="paragraph"> <p>A full list of Jiras can be viewed <a href="https://issues.redhat.com/projects/UNDERTOW/versions/12344252">here</a>. I hope you all enjoy the new Undertow release!</p> </div> <div id="companyfooter-placeholder"></div> </div> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="https://www.redhat.com/"><img src="https://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <script src="https://static.jboss.org/wildfly/scripts/bootstrap-community.min.js"></script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61374382-1', 'auto');
  ga('send', 'pageview');
</script> </body> </html>